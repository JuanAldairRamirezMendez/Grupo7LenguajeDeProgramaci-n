services:
  - type: web
    name: descuentos-backend
    runtime: docker
    rootDir: project/backend
    dockerfilePath: Dockerfile
    branch: main
    healthCheckPath: /health
    envVars:
      - key: DATABASE_URL
        scope: run
        sync: false
      - key: SECRET_KEY
        scope: run
        sync: false
      - key: ALGORITHM
        value: HS256
      - key: ACCESS_TOKEN_EXPIRE_MINUTES
        value: "60"
      - key: FRONTEND_URL
        scope: run
        sync: false

  - type: web
    name: descuentos-frontend
    runtime: node
    rootDir: project/frontend
    buildCommand: npm install && npm run build
    startCommand: npm run start
    envVars:
      - key: VITE_API_URL
        scope: run
        sync: false
